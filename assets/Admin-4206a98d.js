import{o as A,G as S,g as x,s as M}from"./firebase_auth-8b11931c.js";import"./firebase_app-5c6bc232.js";import{r as L,s as N}from"./firebase_database-d5d358c6.js";import{p as v,s as C,T as b,F as D,h as k,U as j}from"./lightbox-778a0ebd.js";import{s as y,o as c,c as G,a as z,f as P,u as T,b as m,F as O,W as U,D as Z}from"./index-1d4b8e8e.js";import{a as I,d as B}from"./firebase-7334874f.js";function W(t,o,r,a){function i(e){return e instanceof r?e:new r(function(s){s(e)})}return new(r||(r=Promise))(function(e,s){function d(u){try{n(a.next(u))}catch(g){s(g)}}function l(u){try{n(a.throw(u))}catch(g){s(g)}}function n(u){u.done?e(u.value):i(u.value).then(d,l)}n((a=a.apply(t,o||[])).next())})}function E(t,o){var r={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},a,i,e,s;return s={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function d(n){return function(u){return l([n,u])}}function l(n){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,i&&(e=n[0]&2?i.return:n[0]?i.throw||((e=i.return)&&e.call(i),0):i.next)&&!(e=e.call(i,n[1])).done)return e;switch(i=0,e&&(n=[n[0]&2,e.value]),n[0]){case 0:case 1:e=n;break;case 4:return r.label++,{value:n[1],done:!1};case 5:r.label++,i=n[1],n=[0];continue;case 7:n=r.ops.pop(),r.trys.pop();continue;default:if(e=r.trys,!(e=e.length>0&&e[e.length-1])&&(n[0]===6||n[0]===2)){r=0;continue}if(n[0]===3&&(!e||n[1]>e[0]&&n[1]<e[3])){r.label=n[1];break}if(n[0]===6&&r.label<e[1]){r.label=e[1],e=n;break}if(e&&r.label<e[2]){r.label=e[2],r.ops.push(n);break}e[2]&&r.ops.pop(),r.trys.pop();continue}n=o.call(t,r)}catch(u){n=[6,u],i=0}finally{a=e=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}}var f=function(){return f=Object.assign||function(o){for(var r,a=1,i=arguments.length;a<i;a++){r=arguments[a];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(o[e]=r[e])}return o},f.apply(this,arguments)},p=function(t){return{loading:t==null,value:t}},R=function(){return function(t,o){switch(o.type){case"error":return f(f({},t),{error:o.error,loading:!1,value:void 0});case"reset":return p(o.defaultValue);case"value":return f(f({},t),{error:void 0,loading:!1,value:o.value});default:return t}}},J=function(t){var o=t?t():void 0,r=C(R(),p(o)),a=r[0],i=r[1],e=b(function(){var l=t?t():void 0;i({type:"reset",defaultValue:l})},[t]),s=b(function(l){i({type:"error",error:l})},[]),d=b(function(l){i({type:"value",value:l})},[]);return D(function(){return{error:a.error,loading:a.loading,reset:e,setError:s,setValue:d,value:a.value}},[a.error,a.loading,e,s,d,a.value])},w=function(t,o){var r=J(function(){return t.currentUser}),a=r.error,i=r.loading,e=r.setError,s=r.setValue,d=r.value;return v(function(){var l=A(t,function(n){return W(void 0,void 0,void 0,function(){var u;return E(this,function(g){switch(g.label){case 0:if(!(o!=null&&o.onUserChanged))return[3,4];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,o.onUserChanged(n)];case 2:return g.sent(),[3,4];case 3:return u=g.sent(),e(u),[3,4];case 4:return s(n),[2]}})})},e);return function(){l()}},[t]),[d,i,a]};const F=y({transition:"background-color .3s, box-shadow .3s",padding:"12px 16px 12px 42px",border:"none",borderRadius:"3px",boxShadow:"0 -1px 0 rgba(0, 0, 0, .04), 0 1px 1px rgba(0, 0, 0, .25)",color:"var(--dark)",fontSize:"16px",fontWeight:"500",fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',backgroundImage:"url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNMTcuNiA5LjJsLS4xLTEuOEg5djMuNGg0LjhDMTMuNiAxMiAxMyAxMyAxMiAxMy42djIuMmgzYTguOCA4LjggMCAwIDAgMi42LTYuNnoiIGZpbGw9IiM0Mjg1RjQiIGZpbGwtcnVsZT0ibm9uemVybyIvPjxwYXRoIGQ9Ik05IDE4YzIuNCAwIDQuNS0uOCA2LTIuMmwtMy0yLjJhNS40IDUuNCAwIDAgMS04LTIuOUgxVjEzYTkgOSAwIDAgMCA4IDV6IiBmaWxsPSIjMzRBODUzIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48cGF0aCBkPSJNNCAxMC43YTUuNCA1LjQgMCAwIDEgMC0zLjRWNUgxYTkgOSAwIDAgMCAwIDhsMy0yLjN6IiBmaWxsPSIjRkJCQzA1IiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48cGF0aCBkPSJNOSAzLjZjMS4zIDAgMi41LjQgMy40IDEuM0wxNSAyLjNBOSA5IDAgMCAwIDEgNWwzIDIuNGE1LjQgNS40IDAgMCAxIDUtMy43eiIgZmlsbD0iI0VBNDMzNSIgZmlsbC1ydWxlPSJub256ZXJvIi8+PHBhdGggZD0iTTAgMGgxOHYxOEgweiIvPjwvZz48L3N2Zz4=)",backgroundColor:"white",backgroundRepeat:"no-repeat",backgroundPosition:"12px 11px",$nest:{"&:hover":{boxShadow:"0 -1px 0 rgba(0, 0, 0, .04), 0 2px 4px rgba(0, 0, 0, .25)"},"&:active":{backgroundColor:"#eeeeee"},"&:focus":{outline:"none",boxShadow:"0 -1px 0 rgba(0, 0, 0, .04), 0 2px 4px rgba(0, 0, 0, .25), 0 0 0 3px #c8dafc"},"&:disabled":{filter:"grayscale(100%)",backgroundColor:"#ebebeb",boxShadow:"0 -1px 0 rgba(0, 0, 0, .04), 0 1px 1px rgba(0, 0, 0, .25)",cursor:"not-allowed"}}});function V(t){return c("button",{className:G(F,t.className),...t,children:t.children||"Sign in with Google"})}const Y=new S,h=y({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100dvh",width:"calc(100vw - 2rem)",margin:"auto",textAlign:"center"});function _(t){const o=x(I),[r,a,i]=w(o),[e,s]=z.use();return v(()=>{setTimeout(()=>{},250)},[r,e]),a?c("div",{className:h,children:"Loading..."}):i?c("div",{className:h,children:["An error occurred: ",i.message]}):r?null:c("div",{className:h,children:[c("h2",{children:"To access this page, you need to login"}),t.invalidUser&&c("h3",{style:{color:"red"},children:"You are not authorized to access this page"}),c(V,{onClick:()=>M(o,Y),style:{width:"fit-content"}}),c("a",{href:"/",style:{marginTop:"4rem"},children:"Return to Website"})]})}function ee(){const t=x(I),[o,r]=k(!1),[a,i,e]=w(t),[s,d]=P.use(),l=T();return v(()=>{if(a){const n=L(B,"content/admin-test");N(n,"test").then(()=>{localStorage.setItem(m,"true")}).catch(u=>{console.error("invalid user",u),localStorage.removeItem(m),t.signOut(),r(!0)})}},[a]),!i&&(!a||e)?c(_,{invalidUser:o}):c(Z.Provider,{value:l,children:[s&&c(j,{children:c(O,{})}),c(U,{})]})}export{ee as Admin};
